@model SymbolsViewModel;
@{
    string[] _date;
    string _52min = "";
    string _52max = "";

    string _pDay = "";
    string _pWeek = "";
    string _pMonth = "";
}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <h4>Símbolos</h4>
        </div>
    </div>

    <div class="row">
        <div class="col-12 text-center">
            @if (Model.simbolos != null && Model.simbolos.Any())
            {
                <table class="table table-condensed table-hover" style="font-size:12px;">
                    <thead class="thead-dark">
                        <tr>
                            <th class="text-start">Fecha</th>
                            <th class="text-start">Símbolo</th>
                            <th class="text-start">Tipo</th>
                            <th class="text-start">Nombre</th>
                            <th class="text-center">Moneda</th>
                            <th class="text-end">Volúmen</th>
                            <th class="text-muted text-end">Apertura</th>
                            <th class="text-success text-end">Vender</th>
                            <th class="text-danger text-end">Comprar</th>
                            <th class="text-muted text-end">Cierre</th>
                            <th class="text-primary text-end">% 1 día</th>
                            <th class="text-primary text-end">% 1 semana</th>
                            <th class="text-primary text-end">% 1 mes</th>
                            <th class="text-dark text-end">a 1 día</th>
                            <th class="text-dark text-end">a 1 semana</th>
                            <th class="text-dark text-end">a 1 mes</th>
                        </tr>
                    </thead>
                    <tbody class="table-group-divider">
                        @foreach (SymbolsViewModelItems simbolo in Model.simbolos)
                        {
                            _date = simbolo.DatePrice.ToString().Split(" ");
                            _52min = "";
                            _52max = "";
                            if (simbolo.Close <= simbolo.FiftyTwoWeekLow) { _52min = "<span class='badge bg-info p-2'>52</span>"; }
                            if (simbolo.Close >= simbolo.FiftyTwoWeekHigh) { _52max = "<span class='badge bg-primary p-2'>52</span>"; }
                            _pDay = "<span class='badge bg-info p-2'>=</span>";
                            switch (simbolo.PredictNextDay)
                            {
                                case -1:
                                    _pDay = "<span class='badge bg-danger p-2'>baja</span>";
                                    break;
                                case 1:
                                    _pDay = "<span class='badge bg-success p-2'>sube</span>";
                                    break;
                            }
                            _pWeek = "<span class='badge bg-info p-2'>=</span>";
                            switch (simbolo.PredictNextWeek)
                            {
                                case -1:
                                    _pWeek = "<span class='badge bg-danger p-2'>baja</span>";
                                    break;
                                case 1:
                                    _pWeek = "<span class='badge bg-success p-2'>sube</span>";
                                    break;
                            }
                            _pMonth = "<span class='badge bg-info p-2'>=</span>";
                            switch (simbolo.PredictNextMonth)
                            {
                                case -1:
                                    _pMonth = "<span class='badge bg-danger p-2'>baja</span>";
                                    break;
                                case 1:
                                    _pMonth = "<span class='badge bg-success p-2'>sube</span>";
                                    break;
                            }
                            <tr>
                                @Html.Raw(neoContext.ToCompareDate(_date))
                                <td class="text-start">@simbolo.code</td>
                                <td class="text-start">@simbolo.instrumentType</td>
                                <td class="text-start">@simbolo.description</td>
                                <td class="text-center">@simbolo.currency</td>
                                <td class="text-end">@neoContext.ToMoney(simbolo.Volume, "")</td>
                                <td class="text-muted text-end">@neoContext.ToMoney(simbolo.Open, "")</td>
                                <td class="text-success text-end bold">@Html.Raw(_52min) @neoContext.ToMoney(simbolo.Low, "")</td>
                                <td class="text-danger text-end bold">@Html.Raw(_52max) @neoContext.ToMoney(simbolo.High, "")</td>
                                <td class="text-muted text-end">@neoContext.ToMoney(simbolo.Close, "")</td>
                                <td class="text-primary text-end">@simbolo.PercentageMovementPreviousDay</td>
                                <td class="text-primary text-end">@simbolo.PercentageMovementPreviousWeek</td>
                                <td class="text-primary text-end">@simbolo.PercentageMovementPreviousMonth</td>
                                <td class="text-end">@Html.Raw(_pDay)</td>
                                <td class="text-end">@Html.Raw(_pWeek)</td>
                                <td class="text-end">@Html.Raw(_pMonth)</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p>Sin datos para mostrar.</p>
            }
        </div>
    </div>
</div>
